<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multithreaded Multiprocess Webserver Index</title>
    
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <!-- Bootstrap JS with Popper (required for Modals) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <style>
        /* Custom styles to ensure the page looks sharp and uses the specified font/colors */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #212529; /* Dark gray background */
            color: #f8f9fa; /* Light text color */
        }
        /* Ensure the body takes full viewport height and centers content */
        .min-vh-100 {
            min-height: 100vh;
        }
        .bg-dark-custom {
            /* Using a slightly darker shade for the card background */
            background-color: #343a40 !important;
        }
    </style>
</head>
<body class="min-vh-100 d-flex align-items-center justify-content-center p-4">

    <!-- Main Content Card -->
    <div class="w-100" style="max-width: 550px;">
        <div class="bg-dark-custom p-5 rounded-3 shadow-lg text-white">

            <!-- Main Title -->
            <header class="text-center mb-5">
                <h1 class="display-5 fw-bold text-info">
                    MULTITHREADED MULTIPROCESS WEBSERVER
                </h1>
                <p class="text-muted mt-2">Default Index Page</p>
            </header>

            <!-- Search Form Area -->
            <section class="mb-4">
                <p class="text-center text-light">
                    Enter a path or query to navigate on the server.
                </p>

                <!-- Input and Button Layout -->
                <div class="d-flex flex-column flex-sm-row gap-3 mt-4">
                    <!-- Search Input -->
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="Enter path (e.g., status/metrics or api/data)"
                        class="form-control form-control-lg bg-secondary text-white border-0"
                        onkeypress="if(event.key === 'Enter') performSearch()"
                    >

                    <!-- Search Button -->
                    <button
                        id="searchButton"
                        onclick="performSearch()"
                        class="btn btn-info btn-lg text-dark fw-bold shadow-sm"
                    >
                        Search
                    </button>
                </div>
            </section>
        </div>
    </div>
    
    <!-- Bootstrap Modal Structure for Alert Replacement (Hidden by default) -->
    <div class="modal fade" id="alertModal" tabindex="-1" aria-labelledby="alertModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content bg-danger text-white border-0 shadow-lg">
          <div class="modal-header border-0">
            <h5 class="modal-title" id="alertModalLabel">Error</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="alertModalBody">
            <!-- Message will be inserted here by JavaScript -->
          </div>
          <div class="modal-footer border-0">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Search Logic Script -->
    <script>
        // Initialize the Bootstrap Modal component
        const alertModalElement = document.getElementById('alertModal');
        const alertModal = new bootstrap.Modal(alertModalElement);

        /**
         * Simple alert replacement using a Bootstrap Modal.
         * @param {string} message - The message to display in the modal body.
         */
        function alertMessage(message) {
            document.getElementById('alertModalBody').innerText = message;
            alertModal.show();
        }

        /**
         * Function to perform the search action.
         * It takes the text from the input field, removes leading/trailing spaces,
         * and then redirects the browser to a new path constructed by prepending a '/'
         * to the entered text.
         */
        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();

            if (query) {
                // Navigate to the new path. This makes the browser request:
                // http://[server_ip]:[port]/[user_input]
                window.location.href = '/' + query;
            } else {
                // Show error modal if the input is empty
                alertMessage('Please enter a path or query to search.');
            }
        }
    </script>
</body>
</html>